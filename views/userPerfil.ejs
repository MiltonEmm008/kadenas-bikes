<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Configuración de Perfil | KADENAS BIKES</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/js/tailwindConfig.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Share+Tech&display=swap"
      rel="stylesheet"
    />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
      html {
        font-family: "Poppins", sans-serif;
      }
    </style>
  </head>
  <body
    class="bg-white dark:bg-[#18181b] text-gray-800 dark:text-gray-100 font-poppins min-h-screen flex flex-col"
    data-user-id="<%= user.id %>"
  >
    <%- include('partials/header1') %>
    <main
      class="flex-1 flex flex-col items-center justify-center px-2 sm:px-4 md:px-6 py-8 w-full pt-20 sm:pt-24 md:pt-28"
    >
      <div
        class="w-full max-w-lg md:max-w-2xl bg-white dark:bg-gray-800 p-4 sm:p-6 md:p-8 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 mx-auto"
        data-aos="fade-up"
        data-aos-duration="800"
      >
        <h1
          class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold font-oswald text-center mb-6 sm:mb-8 text-orange-600 dark:text-orange-400"
          data-aos="zoom-in"
          data-aos-duration="800"
          data-aos-delay="100"
        >
          Configuración de Perfil
        </h1>
        <form
          id="perfilForm"
          class="space-y-4 sm:space-y-6 md:space-y-8"
          onsubmit="return false;"
        >
          <div
            class="flex flex-col items-center gap-2 sm:gap-4 mb-4"
            data-aos="fade-down"
            data-aos-duration="700"
            data-aos-delay="150"
          >
            <img
              id="fotoPerfil"
              src="<%= user.foto_perfil %>"
              alt="Foto de perfil"
              class="rounded-full w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 object-cover mb-2 border-4 border-orange-500 dark:border-orange-400 shadow-md"
            />
            <!-- Saldo del usuario -->
            <div class="text-center mt-1">
              <span class="block text-xs text-gray-500 dark:text-gray-400">Saldo actual</span>
              <span class="text-lg font-bold text-green-600 dark:text-green-400">$<%= user.saldo.toFixed(2) %></span>
            </div>
            <input
              type="file"
              id="inputFoto"
              accept=".jpg,.jpeg,.png,.gif"
              class="hidden"
              onchange="cambiarFoto(event)"
            />
            <button
              type="button"
              class="bg-orange-600 hover:bg-orange-700 text-white py-2 px-4 sm:py-2.5 sm:px-6 rounded-lg text-sm sm:text-base font-semibold transition-all duration-300 active:scale-95 focus:outline-none focus:ring-2 focus:ring-orange-500 dark:focus:ring-orange-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800"
              onclick="document.getElementById('inputFoto').click()"
            >
              Cambiar foto
            </button>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
            <div
              data-aos="fade-right"
              data-aos-duration="700"
              data-aos-delay="200"
            >
              <label
                for="nombre"
                class="block text-sm font-semibold mb-1 text-gray-600 dark:text-gray-300"
                >Nombre</label
              >
              <div class="flex items-center justify-between gap-2">
                <span
                  id="nombreDisplay"
                  class="text-gray-900 dark:text-gray-100 font-medium text-base sm:text-lg truncate"
                  ><%= user.nombre_usuario %></span
                >
                <button
                  type="button"
                  onclick="mostrarInputNombre()"
                  class="text-orange-600 hover:text-orange-700 dark:text-orange-400 dark:hover:text-orange-300 hover:underline text-xs sm:text-sm font-medium transition-colors duration-300"
                >
                  Editar
                </button>
              </div>
              <input
                type="text"
                id="nombre"
                value="<%= user.nombre_usuario %>"
                class="w-full px-3 sm:px-4 py-2 sm:py-3 mt-2 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 dark:focus:ring-orange-400 dark:focus:border-orange-400 transition-all duration-300 hidden placeholder-gray-400 dark:placeholder-gray-500 text-sm sm:text-base"
                placeholder="Tu nombre completo"
              />
            </div>

            <div
              data-aos="fade-left"
              data-aos-duration="700"
              data-aos-delay="250"
            >
              <label
                for="email"
                class="block text-sm font-semibold mb-1 text-gray-600 dark:text-gray-300"
                >Correo electrónico</label
              >
              <div class="flex items-center justify-between gap-2">
                <span
                  id="emailDisplay"
                  class="text-gray-900 dark:text-gray-100 font-medium text-base sm:text-lg truncate"
                  ><%= user.correo %></span
                >
                <button
                  type="button"
                  onclick="mostrarInputEmail()"
                  class="text-orange-600 hover:text-orange-700 dark:text-orange-400 dark:hover:text-orange-300 hover:underline text-xs sm:text-sm font-medium transition-colors duration-300"
                >
                  Editar
                </button>
              </div>
              <input
                type="email"
                id="email"
                value="<%= user.correo %>"
                class="w-full px-3 sm:px-4 py-2 sm:py-3 mt-2 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 dark:focus:ring-orange-400 dark:focus:border-orange-400 transition-all duration-300 hidden placeholder-gray-400 dark:placeholder-gray-500 text-sm sm:text-base"
                placeholder="tu@email.com"
              />
            </div>
          </div>

          <button
            type="button"
            onclick="guardarCambios()"
            class="w-full bg-orange-600 hover:bg-orange-700 text-white py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg text-base sm:text-lg font-semibold transition-all duration-300 active:scale-95 focus:outline-none focus:ring-2 focus:ring-orange-500 dark:focus:ring-orange-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800 mt-6 sm:mt-8"
            data-aos="zoom-in"
            data-aos-duration="800"
            data-aos-delay="350"
          >
            Guardar Cambios
          </button>
        </form>
        <div
          class="mt-4 sm:mt-6"
          data-aos="fade-right"
          data-aos-duration="700"
          data-aos-delay="300"
        >
          <label
            for="password"
            class="block text-sm font-semibold mb-1 text-gray-600 dark:text-gray-300"
            >Contraseña</label
          >
          <div class="flex items-center justify-between gap-2">
            <button
              id="cambiar-contra"
              data-correo="<%= user.correo %>"
              class="text-orange-600 hover:text-orange-700 dark:text-orange-400 dark:hover:text-orange-300 hover:underline text-xs sm:text-sm font-medium transition-colors duration-300"
            >
              Cambiar Contraseña
            </button>
          </div>
        </div>
      </div>
    </main>

    <!-- Modal Custom -->
    <div
      id="customModal"
      class="fixed inset-0 z-50 flex items-center justify-center hidden"
    >
      <!-- Overlay -->
      <div class="absolute inset-0 bg-black opacity-50 dark:opacity-70"></div>
      <!-- Modal container -->
      <div
        class="relative bg-white dark:bg-[#18181b] text-gray-800 dark:text-gray-100 rounded-lg shadow-lg p-6 max-w-md w-full mx-4"
      >
        <!-- Título del modal -->
        <h2
          id="modalTitle"
          class="text-2xl font-bold mb-4 text-orange-600 font-oswald"
        ></h2>
        <!-- Mensaje del modal -->
        <p id="modalMessage" class="mb-6 text-base"></p>
        <!-- Botón para cerrar -->
        <button
          id="modalClose"
          class="w-full bg-orange-600 hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-700 text-white font-semibold py-3 rounded-lg transition"
        >
          ACEPTAR
        </button>
      </div>
    </div>
    <%- include('partials/footer') %>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="/js/perfilScript.js"></script>
    <script src="/js/colorScheme.js"></script>
  </body>
</html>