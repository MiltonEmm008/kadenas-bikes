<header class="fixed top-0 left-0 w-full bg-white text-black dark:bg-[#18181b] dark:text-white z-50 shadow-md transition-colors duration-300">
  <div class="w-full px-4 md:px-6 py-3 flex justify-between items-center">
    <!-- LOGO Y BOTÓN DE MENÚ -->
    <div class="flex items-center gap-3">
      <button id="menu-toggle" class="text-black dark:text-white focus:outline-none p-1">
        <svg class="w-6 h-6 sm:w-7 sm:h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
          stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
      <img class="w-16 sm:w-20 object-contain" src="/images/logotipo.png" alt="Logo" />
    </div>

    <!-- MENÚ PRINCIPAL -->
    <nav id="menu"
      class="hidden flex-col absolute top-full left-0 w-full bg-white dark:bg-[#18181b] text-black dark:text-white shadow-lg border-t border-gray-200 dark:border-gray-700 transition-all duration-300 px-4 py-3">
      <ul class="flex flex-col gap-2">
        <% const links = [
          { href: '/', icon: 'home', label: 'INICIO' },
          { href: '/nosotros', icon: 'users', label: 'NOSOTROS' },
          { href: '/busqueda', icon: 'search', label: 'BUSCAR' },
          { href: '/busqueda?category=ofertas', icon: 'dollar-sign', label: 'OFERTAS' },
          { href: '/chat', icon: 'help-circle', label: 'SOPORTE' },
          { href: '/politicas', icon: 'file-text', label: 'POLITICAS DE USO' }
        ]; %>
        <% links.forEach(link => { %>
        <li>
          <a href="<%= link.href %>"
            class="flex items-center gap-2 py-2 px-2 rounded-md text-base transition-colors hover:text-orange-400 hover:bg-orange-500/20 focus:outline-none focus:ring-2 focus:ring-orange-400">
            <i data-feather="<%= link.icon %>" class="w-4 h-4"></i> <%= link.label %>
          </a>
        </li>
        <% }); %>
      </ul>
    </nav>

    <!-- PERFIL -->
    <div class="flex items-center gap-2 ml-auto">
      <!-- Botón de tema -->
      <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-400" title="Cambiar tema">
        <i data-feather="sun" class="w-5 h-5 text-orange-500 hidden"></i>
        <i data-feather="moon" class="w-5 h-5 text-orange-500"></i>
      </button>
      <a id="foto_usuario" href="/busqueda"
        class="relative flex items-center justify-center rounded-full border-2 border-orange-500 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-400"
        title="Mi Perfil">
        <i data-feather="user" class="w-5 h-5 text-orange-500 absolute ml-1"></i>
        <img src="<%= user.foto_perfil %>" alt="Foto del usuario"
          class="w-10 h-10 sm:w-12 sm:h-12 rounded-full object-cover relative z-10" />
      </a>
    </div>

    <!-- MENÚ USUARIO -->
    <nav id="menu-usuarios"
      class="hidden flex-col absolute top-full right-0 w-48 bg-white dark:bg-[#18181b] text-black dark:text-white shadow-lg border-t border-gray-200 dark:border-gray-700 transition-all duration-300 px-4 py-3 rounded-bl-lg">
      <ul class="flex flex-col gap-2">
        <% const userLinks = [
          { href: '/perfil', icon: 'user', label: 'MI PERFIL' },
          { href: '/carrito', icon: 'shopping-cart', label: 'CARRITO' },
          { href: '/favoritos', icon: 'heart', label: 'FAVORITOS' },
          { href: '/mis-pedidos', icon: 'file-text', label: 'MIS PEDIDOS' },
          { href: '/auth/logout', icon: 'log-out', label: 'CERRAR SESIÓN' }
        ]; %>
        <% userLinks.forEach(link => { %>
        <li class="text-right">
          <a href="<%= link.href %>"
            class="flex items-center justify-end gap-2 py-2 px-2 rounded-md text-base transition-colors hover:text-orange-400 hover:bg-orange-500/20 focus:outline-none focus:ring-2 focus:ring-orange-400">
            <span><%= link.label %></span>
            <i data-feather="<%= link.icon %>" class="w-4 h-4"></i>
          </a>
        </li>
        <% }); %>
      </ul>
    </nav>
  </div>
</header>
